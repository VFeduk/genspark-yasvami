import os
from aiogram import Router, F
from aiogram.filters import Command
from aiogram.types import Message, CallbackQuery, FSInputFile
from aiogram.fsm.context import FSMContext

from config import STATIC_DIR
from keyboards.main_menu import get_main_menu_keyboard, get_knowledge_keyboard, get_start_keyboard
from utils.states import MainState

router = Router()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start
@router.message(Command("start"))
async def cmd_start(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
    welcome_image = FSInputFile(os.path.join(STATIC_DIR, "welcome.jpg"))
    
    await message.answer_photo(
        photo=welcome_image,
        caption="–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π! "
                "–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑–µ–π, –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è –ª—é–±–æ–≥–æ –≤–∏–¥–∞ –¥–æ—Å—É–≥–∞ "
                "–∏–ª–∏ –Ω–∞–π—Ç–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –Ω–∞ —Å–≤–æ–µ–º –ø—É—Ç–∏!) –í –æ–±—â–µ–º –Ω–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫—É \"–°–¢–ê–†–¢\" –∏ –ø–æ–µ—Ö–∞–ª–∏!",
        reply_markup=get_start_keyboard()
    )
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–°–¢–ê–†–¢"
    await state.set_state(MainState.waiting_for_start)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –°–¢–ê–†–¢
@router.callback_query(F.data == "start_button", MainState.waiting_for_start)
async def process_start_button(callback: CallbackQuery, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –°–¢–ê–†–¢"""
    await callback.message.edit_reply_markup(reply_markup=None)
    await callback.message.answer("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é!", reply_markup=get_main_menu_keyboard())
    await callback.answer()
    
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    await state.clear()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /help
@router.message(Command("help"))
async def cmd_help(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_text = (
        "üåü <b>–ë–æ—Ç \"–Ø —Å –í–∞–º–∏\"</b> üåü\n\n"
        "–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –Ω–∞–π—Ç–∏ –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è –ª—é–±–æ–≥–æ –≤–∏–¥–∞ –¥–æ—Å—É–≥–∞ –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ!\n\n"
        "<b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
        "/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º\n"
        "/help - –ü–æ–ª—É—á–∏—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É\n"
        "/profile - –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å\n"
        "/events - –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n"
        "/create - –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ\n"
        "/knowledge - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π\n\n"
        "<b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞:</b>\n"
        "‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n"
        "‚Ä¢ –ü–æ–∏—Å–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ\n"
        "‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
        "‚Ä¢ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
        "‚Ä¢ VIP-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤\n\n"
        "–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–π–¥–∏—Ç–µ –ø—Ä–æ—Å—Ç—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å!"
    )
    
    await message.answer(help_text, parse_mode="HTML")

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /knowledge
@router.message(Command("knowledge"))
async def cmd_knowledge(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /knowledge"""
    await message.answer(
        "–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –±–æ—Ç–∞ \"–Ø —Å –í–∞–º–∏\".\n"
        "–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∞–≤–∏–ª–∞—Ö –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö:",
        reply_markup=get_knowledge_keyboard()
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
@router.callback_query(F.data.startswith("knowledge_"))
async def process_knowledge_buttons(callback: CallbackQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π"""
    knowledge_type = callback.data.split("_")[1]
    
    if knowledge_type == "creation":
        # –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
        text = (
            "<b>–ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</b>\n\n"
            "<b>1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</b>\n\n"
            "‚Ä¢ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ <b>–æ–±—â–µ–Ω–∏–µ, —Å–æ–≤–º–µ—Å—Ç–Ω—ã–π –¥–æ—Å—É–≥ –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ</b>.\n"
            "‚Ä¢ <b>–ó–∞–ø—Ä–µ—â–µ–Ω–æ</b> —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —Å –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π –≤—ã–≥–æ–¥–æ–π (–ø—Ä–æ–¥–∞–∂–∏, —Ä–µ–∫–ª–∞–º–∞ —É—Å–ª—É–≥), "
            "–∞ —Ç–∞–∫–∂–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –Ω–∞—Ä—É—à–∞—é—â–∏–µ –∑–∞–∫–æ–Ω—ã –†–§.\n"
            "‚Ä¢ –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è <b>–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ</b>.\n\n"
            "<b>2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é</b>\n\n"
            "‚ùå <b>–ù–µ–ª—å–∑—è</b>:\n"
            "‚Ä¢ –£–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –Ω–µ–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –ª–µ–∫—Å–∏–∫—É –≤ –æ–ø–∏—Å–∞–Ω–∏–∏.\n"
            "‚Ä¢ –£–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, —Å–æ—Ü—Å–µ—Ç–∏) –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–∏—è.\n"
            "‚Ä¢ –†–∞–∑–º–µ—â–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —Å <b>–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–π, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–π</b> –∏–ª–∏ <b>—ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–π</b> –ø–æ–≤–µ—Å—Ç–∫–æ–π.\n"
            "‚Ä¢ –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç <b>18+</b> –∏–ª–∏ –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞.\n\n"
            "‚úÖ <b>–ú–æ–∂–Ω–æ</b>:\n"
            "‚Ä¢ –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å <b>—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ, —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ</b> –∏ –¥—Ä—É–≥–∏–µ <b>–¥—Ä—É–∂–µ—Å–∫–∏–µ</b> –≤—Å—Ç—Ä–µ—á–∏.\n"
            "‚Ä¢ –£–∫–∞–∑—ã–≤–∞—Ç—å <b>–º–µ—Å—Ç–æ, –≤—Ä–µ–º—è, –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</b> –∏ –¥—Ä—É–≥—É—é –ø–æ–ª–µ–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.\n"
            "‚Ä¢ –ü—Ä–æ—Å–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π —á—Ç–æ-—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ (–µ–¥—É, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å).\n\n"
            "<b>3. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞</b>\n\n"
            "‚Ä¢ –í—ã <b>–æ–±—è–∑—É–µ—Ç–µ—Å—å</b> –±—ã—Ç—å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.\n"
            "‚Ä¢ –ï—Å–ª–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ <b>–æ—Ç–º–µ–Ω—è–µ—Ç—Å—è</b>, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–≤–µ–¥–æ–º–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ <b>–º–∏–Ω–∏–º—É–º –∑–∞ 6 —á–∞—Å–æ–≤</b>.\n"
            "‚Ä¢ –ù–µ—Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –≤–µ–¥–µ—Ç –∫ <b>—Å–Ω–∏–∂–µ–Ω–∏—é —Ä–µ–π—Ç–∏–Ω–≥–∞</b> –∏–ª–∏ <b>–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ</b>."
        )
    elif knowledge_type == "registration":
        # –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
        text = (
            "<b>–ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</b>\n\n"
            "<b>1. –£—Å–ª–æ–≤–∏—è —É—á–∞—Å—Ç–∏—è</b>\n\n"
            "‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è <b>—Ç–æ–ª—å–∫–æ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞–º –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É –∏ –ø–æ–ª—É</b> "
            "(–µ—Å–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä —É–∫–∞–∑–∞–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è).\n"
            "‚Ä¢ <b>–ù–µ–ª—å–∑—è</b> –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è ¬´–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π¬ª ‚Äì –µ—Å–ª–∏ –≤—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –ø—Ä–∏–¥–µ—Ç–µ, –ª—É—á—à–µ –Ω–µ –∑–∞–Ω–∏–º–∞–π—Ç–µ –º–µ—Å—Ç–æ.\n\n"
            "<b>2. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏</b>\n\n"
            "‚ùå <b>–ó–∞–ø—Ä–µ—â–µ–Ω–æ</b>:\n"
            "‚Ä¢ –û—Å–∫–æ—Ä–±–ª—è—Ç—å, –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –Ω–∞—Ä—É—à–∞—Ç—å –ª–∏—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.\n"
            "‚Ä¢ –ü—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ <b>–Ω–µ—Ç—Ä–µ–∑–≤–æ–º –≤–∏–¥–µ</b> –∏–ª–∏ –ø–æ–¥ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ–º –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.\n"
            "‚Ä¢ –ü–æ–∫–∏–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ <b>–±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</b>, –µ—Å–ª–∏ –æ—Ç –≤–∞—Å –∑–∞–≤–∏—Å–∏—Ç –µ–≥–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ "
            "(–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã ‚Äì –≤–æ–¥–∏—Ç–µ–ª—å –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä).\n\n"
            "‚úÖ <b>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</b>:\n"
            "‚Ä¢ –ë—ã—Ç—å <b>–ø—É–Ω–∫—Ç—É–∞–ª—å–Ω—ã–º</b> –∏ —É–≤–∞–∂–∞—Ç—å –≤—Ä–µ–º—è –¥—Ä—É–≥–∏—Ö.\n"
            "‚Ä¢ –°–æ–±–ª—é–¥–∞—Ç—å <b>–¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</b> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π —Ç–æ, –æ —á–µ–º –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å).\n"
            "‚Ä¢ –ü–æ—Å–ª–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è <b>–æ—Å—Ç–∞–≤–∏—Ç—å —á–µ—Å—Ç–Ω—ã–π –æ—Ç–∑—ã–≤</b> –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–µ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö.\n\n"
            "<b>3. –û—Ç–º–µ–Ω–∞ —É—á–∞—Å—Ç–∏—è</b>\n\n"
            "‚Ä¢ –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥—É–º–∞–ª–∏, <b>–æ—Ç–º–µ–Ω–∏—Ç–µ –∑–∞–ø–∏—Å—å</b> –∑–∞ <b>12 —á–∞—Å–æ–≤</b> –¥–æ –Ω–∞—á–∞–ª–∞.\n"
            "‚Ä¢ –ß–∞—Å—Ç—ã–µ –æ—Ç–∫–∞–∑—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç –º–æ–≥—É—Ç <b>–ø–æ–Ω–∏–∑–∏—Ç—å –≤–∞—à —Ä–µ–π—Ç–∏–Ω–≥</b>.\n\n"
            "<b>–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π</b>\n\n"
            "‚Ä¢ <b>–ü–µ—Ä–≤–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ</b> ‚Üí <b>–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</b> –æ—Ç –±–æ—Ç–∞.\n"
            "‚Ä¢ <b>–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ</b> ‚Üí <b>—Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞</b> (-10 –±–∞–ª–ª–æ–≤).\n"
            "‚Ä¢ <b>–°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è</b> ‚Üí <b>–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞</b> –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å/—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö."
        )
    elif knowledge_type == "rating":
        # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
        text = (
            "<b>–û —Å–∏—Å—Ç–µ–º–µ —Ä–µ–π—Ç–∏–Ω–≥–∞</b>\n\n"
            "–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ –∏–º–µ–µ—Ç <b>—Ä–µ–π—Ç–∏–Ω–≥</b>, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Ä–∞–∂–∞–µ—Ç –µ–≥–æ —Ä–µ–ø—É—Ç–∞—Ü–∏—é –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.\n\n"
            "<b>–ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥:</b> 100 –±–∞–ª–ª–æ–≤\n\n"
            "<b>–ö–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–π—Ç–∏–Ω–≥:</b>\n\n"
            "‚Ä¢ ‚≠êÔ∏è ‚Äî –æ–¥–Ω–∞ –∑–≤–µ–∑–¥–∞ = <b>-10 –±–∞–ª–ª–æ–≤</b> –∫ —Ä–µ–π—Ç–∏–Ω–≥—É\n"
            "‚Ä¢ ‚≠êÔ∏è‚≠êÔ∏è ‚Äî –¥–≤–µ –∑–≤–µ–∑–¥—ã = <b>-5 –±–∞–ª–ª–æ–≤</b> –∫ —Ä–µ–π—Ç–∏–Ω–≥—É\n"
            "‚Ä¢ ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è ‚Äî —Ç—Ä–∏ –∑–≤–µ–∑–¥—ã = <b>0 –±–∞–ª–ª–æ–≤</b> (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)\n"
            "‚Ä¢ ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è ‚Äî —á–µ—Ç—ã—Ä–µ –∑–≤–µ–∑–¥—ã = <b>+5 –±–∞–ª–ª–æ–≤</b> –∫ —Ä–µ–π—Ç–∏–Ω–≥—É\n"
            "‚Ä¢ ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è ‚Äî –ø—è—Ç—å –∑–≤–µ–∑–¥ = <b>+10 –±–∞–ª–ª–æ–≤</b> –∫ —Ä–µ–π—Ç–∏–Ω–≥—É\n\n"
            "<b>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É:</b>\n\n"
            "‚Ä¢ –†–µ–π—Ç–∏–Ω–≥ <20 –±–∞–ª–ª–æ–≤: <b>–ó–∞–ø—Ä–µ—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</b>\n"
            "‚Ä¢ –†–µ–π—Ç–∏–Ω–≥ 0 –±–∞–ª–ª–æ–≤: <b>–ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞</b> (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å, –Ω–∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è)\n\n"
            "<b>–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥:</b>\n\n"
            "‚Ä¢ –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –ø–æ–ª—É—á–∞—è –≤—ã—Å–æ–∫–∏–µ –æ—Ü–µ–Ω–∫–∏ –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤\n"
            "‚Ä¢ –ë—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º –∏ –≤–µ–∂–ª–∏–≤—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —á—É–∂–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n"
            "‚Ä¢ –°–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã\n"
            "‚Ä¢ –ü—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ VIP-—Å—Ç–∞—Ç—É—Å, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ (–¥–æ 3 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü)\n\n"
            "<b>–û—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ:</b>\n"
            "–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –æ—Ü–µ–Ω–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ –∏ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. "
            "–û—Ü–µ–Ω–∫–∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞, –Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ."
        )
    elif knowledge_type == "vip":
        # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ VIP-—Å—Ç–∞—Ç—É—Å–µ
        text = (
            "<b>VIP-—Å—Ç–∞—Ç—É—Å</b>\n\n"
            "VIP-—Å—Ç–∞—Ç—É—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.\n\n"
            "<b>–°—Ç–æ–∏–º–æ—Å—Ç—å:</b> 1500 —Ç–æ–∫–µ–Ω–æ–≤ (1 —Ç–æ–∫–µ–Ω = 1 —Ä—É–±–ª—å)\n\n"
            "<b>–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:</b> 30 –¥–Ω–µ–π\n\n"
            "<b>–ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏ VIP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</b>\n\n"
            "‚Ä¢ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ –∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö\n"
            "‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–æ 3 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü\n"
            "‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫—Ä—ã–≤–∞—Ç—å —Å–≤–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
            "‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ\n\n"
            "<b>–ö–∞–∫ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ VIP-—Å—Ç–∞—Ç—É—Å:</b>\n\n"
            "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª\n"
            "2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é ¬´–ü—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ VIP¬ª\n"
            "3. –û–ø–ª–∞—Ç–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤\n"
            "4. –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç–∞—Ç—É—Å VIP –Ω–∞ 30 –¥–Ω–µ–π\n\n"
            "–ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è VIP-—Å—Ç–∞—Ç—É—Å–∞ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. "
            "–î–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø–ª–∞—Ç–∏—Ç—å VIP-—Å—Ç–∞—Ç—É—Å –ø–æ–≤—Ç–æ—Ä–Ω–æ."
        )
    else:
        # –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
        text = (
            "<b>–û –ø—Ä–æ–µ–∫—Ç–µ \"–Ø —Å –í–∞–º–∏\"</b>\n\n"
            "–ù–∞—à –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –Ω–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º, –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è –¥–æ—Å—É–≥–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ "
            "–ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–æ–≤—ã–º–∏ –ª—é–¥—å–º–∏.\n\n"
            "<b>–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:</b>\n"
            "–ù–µ –≤—Å–µ –∑–Ω–∞—é—Ç, –∫—É–¥–∞ –ø–æ–π—Ç–∏ –ø–æ–≥—É–ª—è—Ç—å –∏–ª–∏ —Å –∫–µ–º —Å—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω—É—é –ø–ª–æ—â–∞–¥–∫—É, –ø–æ–∫–∞—Ç–∞—Ç—å—Å—è –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ "
            "–∏–ª–∏ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –¥–æ–º–∏–∫ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ. –ú–Ω–æ–≥–∏–µ —Ö–æ—Ç—è—Ç –Ω–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º, –∞ –∫—Ç–æ-—Ç–æ –ø–µ—Ä–µ–µ—Ö–∞–ª –≤ –¥—Ä—É–≥–æ–π "
            "–≥–æ—Ä–æ–¥ –∏ –Ω–∏–∫–æ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç.\n\n"
            "–ù–∞—à —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ–≥–∞–µ—Ç –∫–∞–∂–¥–æ–º—É –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â—É—é –∫–æ–º–ø–∞–Ω–∏—é –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–≤–æ–∏ –∏–¥–µ–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ "
            "–≤—Ä–µ–º—è–ø—Ä–µ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è.\n\n"
            "<b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>\n"
            "‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n"
            "‚Ä¢ –ü–æ–∏—Å–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ\n"
            "‚Ä¢ –û–±—â–µ–Ω–∏–µ —Å –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏\n"
            "‚Ä¢ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞\n\n"
            "<b>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ \"–Ø —Å –í–∞–º–∏\"</b> ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç–µ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑–µ–π –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ!"
        )
    
    await callback.message.answer(text, parse_mode="HTML")
    await callback.answer()

# –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
@router.callback_query(F.data == "back_to_main")
async def back_to_main_menu(callback: CallbackQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    await callback.message.edit_reply_markup(reply_markup=None)
    await callback.message.answer("–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=get_main_menu_keyboard())
    await callback.answer()